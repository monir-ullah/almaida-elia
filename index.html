<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Our Products</title>
  <!-- Add jQuery first -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  
  <!-- Add Magnific Popup CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css">
  
  <!-- Add Magnific Popup JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
  
  <style>
    * { box-sizing: border-box; }
    body { font-family: Arial, sans-serif; margin: 0; background: #f1f1f1; }
    .container { 
      display: flex; 
      flex-direction: row;
    }

    @media screen and (max-width: 768px) {
      .container {
        flex-direction: column;
      }

      .sidebar {
        width: 100% !important; /* Override the fixed width */
        min-width: 100%;
        border-right: none;
        border-bottom: 1px solid #ccc;
      }

      .menu-header {
        width: 100%;
        padding: 15px;
        text-align: center;
      }

      .menu-item,
      .submenu-item,
      .sub-submenu-item {
        width: 100%;
        padding: 15px;
        text-align: left;
      }

      .submenu {
        width: 100%;
      }

      .sub-submenu {
        width: 100%;
      }

      .submenu-item {
        padding-left: 30px;
      }

      .sub-submenu-item {
        padding-left: 45px;
      }

      .content {
        padding: 15px;
      }

      .product-grid {
        justify-content: center;
        gap: 15px;
      }

      .product-card {
        width: calc(50% - 15px);
        min-width: 140px;
      }

      .product-detail-content {
        flex-direction: column;
      }

      .product-detail-image img {
        width: 100%;
        height: auto;
        max-height: 300px;
      }

      .submenu-title {
        font-size: 20px;
        margin: 15px 0;
      }

      .menu-item {
        padding: 15px 20px;
      }

      .submenu-item {
        padding: 12px 30px;
      }

      .sub-submenu-item {
        padding: 12px 40px;
      }

      .modal-content {
        width: 95%;
        flex-direction: column;
        gap: 20px;
        margin: 10% auto;
      }

      .modal-image {
        max-width: 100%;
      }

      .modal-info {
        padding: 15px 0;
      }

      /* Product Detail Page Responsive */
      .product-detail {
        margin-top: 15px;
      }

      .product-detail-header {
        font-size: 20px;
        margin: 15px 0;
      }

      .product-detail-content {
        padding: 15px;
      }

      .product-detail-info {
        padding: 15px 0;
      }

      /* Magnific Popup Customization for Mobile */
      .mfp-img-mobile .mfp-image-holder {
        padding-left: 0;
        padding-right: 0;
      }

      .mfp-img-mobile img.mfp-img {
        padding: 0;
      }
    }

    /* Additional breakpoint for very small screens */
    @media screen and (max-width: 480px) {
      .product-card {
        width: 100%;
      }

      .product-detail-image img {
        max-height: 250px;
      }
    }
    .sidebar {
      width: 250px;
      background-color: #ffffff;
      border-right: 1px solid #ccc;
      padding: 0;
    }
    .menu-header {
      background: #2f4050;
      color: white;
      padding: 15px 20px;
      font-weight: bold;
    }
    .menu-item {
      padding: 12px 20px;
      cursor: pointer;
      border-bottom: 1px solid #eee;
      background: #ffffff;
    }
    .menu-item:hover {
      background-color: #f5f5f5;
    }
    .menu-item.active-menu {
      background-color: #ffc107;
      color: #333;
    }
    .submenu-item {
      padding: 10px 40px;
      cursor: pointer;
      border-bottom: 1px solid #f0f0f0;
      background-color: #fff;
    }
    .submenu-item:hover {
      background-color: #f8f8f8;
    }
    .submenu-item.active-submenu {
      background-color: #fff3cd;
    }
    .sub-submenu-item {
      padding: 10px 60px;
      cursor: pointer;
      border-bottom: 1px solid #f0f0f0;
      background-color: #fff;
      font-size: 0.9em;
    }
    .sub-submenu-item:hover {
      background-color: #f8f8f8;
    }
    .sub-submenu-item.active {
      background-color: #fff3cd;
    }
    .content {
      flex: 1;
      padding: 20px;
    }
    .product-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 40px;
    }
    .product-card {
      width: 200px;
      padding: 15px;
      background: #fff;
      border: 1px solid #ddd;
      text-align: center;
      box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 2px 4px 12px rgba(0,0,0,0.15);
    }
    .product-card img {
      max-width: 100%;
      height: 150px;
      object-fit: contain;
      margin-bottom: 10px;
    }
    .product-card p {
      margin: 10px 0;
      color: #333;
      font-weight: 500;
    }
    .submenu-title {
      font-size: 24px;
      font-weight: bold;
      margin: 20px 0 20px;
      color: #2f4050;
      padding-bottom: 10px;
      border-bottom: 2px solid #ffc107;
    }

    /* Add new modal styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1000;
    }

    .modal-content {
      position: relative;
      background-color: #fff;
      margin: 5% auto;
      padding: 20px;
      width: 80%;
      max-width: 800px;
      border-radius: 8px;
      display: flex;
      gap: 30px;
    }

    .modal-image {
      flex: 1;
      max-width: 50%;
    }

    .modal-image img {
      width: 100%;
      height: auto;
      object-fit: contain;
    }

    .modal-info {
      flex: 1;
      padding: 20px;
    }

    .modal-info h2 {
      color: #2f4050;
      margin-bottom: 20px;
    }

    .modal-info p {
      margin-bottom: 15px;
      line-height: 1.6;
    }

    .close-modal {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 28px;
      font-weight: bold;
      color: #666;
      cursor: pointer;
    }

    .close-modal:hover {
      color: #000;
    }

    .product-detail-image img {
        width: 500px;
        height: 500px;
    }

    #product-grid button {
        display: none;
    }

    h1.product-detail-header {
    /* border-bottom: 2px solid yellow; */
        font-size: 24px;
        font-weight: bold;
        margin: 20px 0 20px;
        color: #2f4050;
        padding-bottom: 10px;
        border-bottom: 2px solid #ffc107;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="sidebar" id="sidebar">
    <div class="menu-header">Our Products</div>
    
    <div class="menu-item" onclick="selectMainMenu(this, 'biscuit')">Biscuit</div>
    <div class="submenu biscuit">
      <div class="submenu-item" onclick="showProducts(this, 'danesita')">Danesita</div>
      <div class="submenu-item" onclick="showProducts(this, 'asolo')">Asolo Biscuits</div>
    </div>

    <div class="menu-item" onclick="selectMainMenu(this, 'beverages')">Beverages</div>
    <div class="submenu beverages" style="display: none;">
      <div class="submenu-item">Chaaba Juice</div>
      <div class="sub-submenu">
        <div class="sub-submenu-item" onclick="showProducts(this, 'chaaba_mango')">Chaaba Mango Milk Drink</div>
        <div class="sub-submenu-item" onclick="showProducts(this, 'chaaba_melon')">Chaaba Melon Milk Flavour</div>
        <div class="sub-submenu-item" onclick="showProducts(this, 'chaaba_almond')">Chaaba Almond Drink</div>
        <div class="sub-submenu-item" onclick="showProducts(this, 'chaaba_apple')">Chaaba Red Apple & White Grape</div>
        <div class="sub-submenu-item" onclick="showProducts(this, 'chaaba_lychee')">Chaaba Lychee Juice Drink</div>
        <div class="sub-submenu-item" onclick="showProducts(this, 'chaaba_grape')">Chaaba Red Grape Juice Drink</div>
      </div>
    </div>

    <div class="menu-item" onclick="selectMainMenu(this, 'pulses')">Pulses/Peas</div>
    <div class="menu-item" onclick="selectMainMenu(this, 'condiments')">Condiments</div>
    <div class="menu-item" onclick="selectMainMenu(this, 'cooking_oil')">Cooking Oil</div>
    <div class="menu-item" onclick="selectMainMenu(this, 'rice')">Rice</div>
    <div class="menu-item" onclick="selectMainMenu(this, 'sugar')">Sugar</div>
    <div class="menu-item" onclick="selectMainMenu(this, 'machines')">Machines</div>
  </div>

  <div class="content">
    <div id="product-grid"></div>
  </div>
</div>

<!-- <div class="modal" id="productModal">
  <div class="modal-content">
    <span class="close-modal" onclick="closeModal()">&times;</span>
    <div class="modal-image">
      <img id="modalImage" src="" alt="">
    </div>
    <div class="modal-info">
      <h2 id="modalTitle"></h2>
      <div id="modalDescription"></div>
    </div>
  </div>
</div> -->

<script>
  const products = {
    danesita: [
      { 
        name: "Butter Cookies", 
        img: "https://i.imgur.com/xvXgPyy.png",
        description: "Premium butter cookies made with the finest ingredients. Perfect with tea or coffee.",
        details: [
          "Net Weight: 454g",
          "Ingredients: Wheat flour, butter, sugar, eggs",
          "Storage: Keep in a cool, dry place",
          "Shelf Life: 12 months"
        ]
      }
    ],
    asolo: [
      { 
        name: "Asolo Biscuit Pack", 
        img: "https://i.imgur.com/VGHdUGT.png",
        description: "Delicious assorted biscuits perfect for any occasion.",
        details: [
          "Net Weight: 300g",
          "Ingredients: Wheat flour, sugar, vegetable oil",
          "Storage: Store in an airtight container",
          "Shelf Life: 9 months"
        ]
      }
    ],
    chaaba_mango: [
      { 
        name: "Chaaba Mango Milk Drink", 
        img: "https://cdn.pixabay.com/photo/2016/09/14/19/46/mango-juice-1670434_1280.jpg",
        description: "Refreshing mango-flavored milk drink made with real mango pulp.",
        details: [
          "Volume: 230ml",
          "Ingredients: Milk, mango pulp, sugar, vitamins",
          "Storage: Keep refrigerated after opening",
          "Best served chilled"
        ]
      }
    ],
    chaaba_melon: [
      { name: "Chaaba Melon Milk Flavour", img: "https://cdn.pixabay.com/photo/2017/07/05/15/41/milk-2474993_1280.jpg" }
    ],
    chaaba_almond: [
      { name: "Chaaba Almond Drink", img: "https://cdn.pixabay.com/photo/2017/07/05/15/41/almond-milk-2474995_1280.jpg" }
    ],
    chaaba_apple: [
      { name: "Chaaba Red Apple & White Grape Juice Drink", img: "https://cdn.pixabay.com/photo/2015/02/10/09/27/juice-630511_1280.jpg" }
    ],
    chaaba_lychee: [
      { name: "Chaaba Lychee Juice Drink", img: "https://cdn.pixabay.com/photo/2019/06/25/13/59/refreshing-4298322_1280.jpg" }
    ],
    chaaba_grape: [
      { name: "Chaaba Red Grape Juice Drink", img: "https://cdn.pixabay.com/photo/2016/07/21/11/17/drink-1532300_1280.jpg" }
    ],
    machines: [
      { name: "Packing Machine 1", img: "https://i.imgur.com/tXdd11R.jpg" },
      { name: "Packing Machine 2", img: "https://i.imgur.com/TNcoJjM.jpg" },
      { name: "Packing Machine 3", img: "https://i.imgur.com/ZkHzmZ1.jpg" },
      { name: "Packing Machine 4", img: "https://i.imgur.com/l4YZ9bL.jpg" },
      { name: "Packing Machine 5", img: "https://i.imgur.com/kH5ZmTO.jpg" }
    ]
  };

  function selectMainMenu(element, mainKey) {
    document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active-menu'));
    element.classList.add('active-menu');

    document.querySelectorAll('.submenu').forEach(el => el.style.display = 'none');
    const submenu = document.querySelector(`.submenu.${mainKey}`);
    if (submenu) submenu.style.display = 'block';

    document.querySelectorAll('.submenu-item, .sub-submenu-item').forEach(el => el.classList.remove('active-submenu', 'active'));

    const container = document.getElementById('product-grid');
    container.innerHTML = '';

    // New code to show all submenu images
    if (mainKey === 'beverages') {
      const allBeverageProducts = [
        ...products.chaaba_mango || [],
        ...products.chaaba_melon || [],
        ...products.chaaba_almond || [],
        ...products.chaaba_apple || [],
        ...products.chaaba_lychee || [],
        ...products.chaaba_grape || []
      ];
      renderSubmenuProducts('Beverages', allBeverageProducts);
    } else if (mainKey === 'biscuit') {
      const allBiscuitProducts = [
        ...products.danesita || [],
        ...products.asolo || []
      ];
      renderSubmenuProducts('Biscuits', allBiscuitProducts);
    } else if (products[mainKey]) {
      renderSubmenuProducts(mainKey.charAt(0).toUpperCase() + mainKey.slice(1).replace('_', ' '), products[mainKey]);
    }
  }

  function showProducts(element, key) {
    document.querySelectorAll('.submenu-item, .sub-submenu-item').forEach(el => {
      el.classList.remove('active-submenu', 'active');
    });
    element.classList.add(element.classList.contains('submenu-item') ? 'active-submenu' : 'active');

    const container = document.getElementById('product-grid');
    container.innerHTML = '';
    renderSubmenuProducts(element.textContent, products[key] || []);
  }

  function renderSubmenuProducts(title, items = []) {
    const container = document.getElementById('product-grid');
    const titleEl = document.createElement('div');
    titleEl.className = 'submenu-title';
    titleEl.textContent = title;
    container.appendChild(titleEl);

    const grid = document.createElement('div');
    grid.className = 'product-grid';
    items.forEach(product => {
      const card = document.createElement('div');
      card.className = 'product-card';
      
      // Create elements separately instead of using innerHTML
      const img = document.createElement('img');
      img.src = product.img;
      img.alt = product.name;
      
      const p = document.createElement('p');
      p.textContent = product.name;
      
      // Add elements to card
      card.appendChild(img);
      card.appendChild(p);
      
      // Add click handler
      card.addEventListener('click', () => showProductDetail(product, title));
      
      grid.appendChild(card);
    });
    container.appendChild(grid);
  }

  // Load default view
  selectMainMenu(document.querySelector('.menu-item'), 'biscuit');

  function openModal(product) {
    const modal = document.getElementById('productModal');
    const modalImg = document.getElementById('modalImage');
    const modalTitle = document.getElementById('modalTitle');
    const modalDescription = document.getElementById('modalDescription');

    modalImg.src = product.img;
    modalTitle.textContent = product.name;
    
    let descriptionHTML = `<p>${product.description || ''}</p>`;
    if (product.details) {
      descriptionHTML += '<ul>';
      product.details.forEach(detail => {
        descriptionHTML += `<li>${detail}</li>`;
      });
      descriptionHTML += '</ul>';
    }
    modalDescription.innerHTML = descriptionHTML;
    
    modal.style.display = 'block';
  }

  // function closeModal() {
  //   document.getElementById('productModal').style.display = 'none';
  // }

  // // Close modal when clicking outside of it
  // window.onclick = function(event) {
  //   const modal = document.getElementById('productModal');
  //   if (event.target === modal) {
  //     modal.style.display = 'none';
  //   }
  // }



  function showProductDetail(product, title) {
    const container = document.getElementById('product-grid');
    container.innerHTML = '';

    console.log(title)

    const backButton = document.createElement('button');
    // backButton.className = 'back-button';
    // backButton.innerHTML = '← Back to Products';
    backButton.onclick = () => {
      if (document.querySelector('.active-submenu')) {
        const activeSubmenu = document.querySelector('.active-submenu');
        showProducts(activeSubmenu, activeSubmenu.getAttribute('data-key'));
      } else if (document.querySelector('.active-menu')) {
        const activeMenu = document.querySelector('.active-menu');
        selectMainMenu(activeMenu, activeMenu.getAttribute('data-key'));
      }
    };

    const detailDiv = document.createElement('div');
    detailDiv.className = 'product-detail';
    
    const header = document.createElement('h1');
    header.className = 'product-detail-header';
    header.textContent = product.name;

    const content = document.createElement('div');
    content.className = 'product-detail-content';
    
    const imageDiv = document.createElement('div');
    imageDiv.className = 'product-detail-image';

    // i need to show a image light box plugin on the click on the image.  set a onlick event to show the image in a light box.
    // imageDiv.innerHTML = `<img src="${product.img}" alt="${product.name}" onclick="openModal(${product})">`;

imageDiv.innerHTML = `<img src="${product.img}" alt="${product.name}" class="popup-image">`;

// Initialize Magnific Popup for the image
$(document).ready(function() {
  $('.product-detail-image .popup-image').magnificPopup({
    type: 'image',
    items: {
      src: product.img
    }
    // closeOnContentClick: true,
    // mainClass: 'mfp-img-mobile',
    // image: {
    //   verticalFit: true
    // }
  });
});
    // imageDiv.innerHTML = `<img src="${product.img}" alt="${product.name}">`;

    const infoDiv = document.createElement('div');
    infoDiv.className = 'product-detail-info';
    infoDiv.innerHTML = `
      <p>${product.description || ''}</p>
      ${product.details ? `
        <ul>
          ${product.details.map(detail => `<li>${detail}</li>`).join('')}
        </ul>
      ` : ''}
    `;

    content.appendChild(imageDiv);
    content.appendChild(infoDiv);
    
    container.appendChild(backButton);
    container.appendChild(header);
    container.appendChild(content);
  }

  function renderSubmenuProducts(title, items = []) {
    const container = document.getElementById('product-grid');
    const titleEl = document.createElement('div');
    titleEl.className = 'submenu-title';
    titleEl.textContent = title;
    container.appendChild(titleEl);

    const grid = document.createElement('div');
    grid.className = 'product-grid';
    items.forEach(product => {
      const card = document.createElement('div');
      card.addEventListener('click', () => showProductDetail(product, title));
      card.className = 'product-card';
      card.innerHTML = `
        <img src="${product.img}" alt="${product.name}">
        <p>${product.name}</p>
      `;
      grid.appendChild(card);
    });
    container.appendChild(grid);
  }
</script>
</body>
</html>
